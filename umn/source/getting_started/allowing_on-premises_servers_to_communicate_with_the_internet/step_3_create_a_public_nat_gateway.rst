:original_name: nat_qs_0016.html

.. _nat_qs_0016:

Step 3: Create a Public NAT Gateway
===================================

Scenarios
---------

Create a public NAT gateway.

Prerequisites
-------------

-  You have created the VPC and subnet required for creating a public NAT gateway.
-  To allow traffic to pass through the public NAT gateway, a route to the public NAT gateway in the VPC is required. When you create a public NAT gateway, a default route 0.0.0.0/0 to the public NAT gateway is automatically added to the default route table of the VPC. If the default route 0.0.0.0/0 already exists in the default route table of the VPC before you create the public NAT gateway, the default route that points to the public NAT gateway will fail to be added automatically. In this case, perform the following operations after the public NAT gateway is successfully created: Manually add a different route that points to the gateway or create a default route 0.0.0.0/0 pointing to the gateway in the new routing table.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner and select the desired region and project.

#. In the upper left corner of the page, click |image2| to expand the service list and choose **Network** > **NAT Gateway**.

   The **Public NAT Gateways** page is displayed.

#. On the displayed page, click **Create** **Public NAT Gateway**.


   .. figure:: /_static/images/en-us_image_0000002115710945.png
      :alt: **Figure 1** Create Public NAT Gateway

      **Figure 1** Create Public NAT Gateway

#. Configure required parameters. For details, see :ref:`Table 1 <nat_qs_0016__nat_qs_0003_table27487005195751>`.

   .. _nat_qs_0016__nat_qs_0003_table27487005195751:

   .. table:: **Table 1** Descriptions of public NAT gateway parameters

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      +===================================+===============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
      | Region                            | The region where the public NAT gateway is located.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Name                              | The name of the public NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | Enter up to 64 characters. Only digits, letters, underscores (_), hyphens (-), and periods (.) are allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | VPC                               | The VPC that the public NAT gateway belongs to. Select a VPC that is not used by any other NAT gateways and has no default route.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The selected VPC cannot be changed after you create the public NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   |    To allow traffic to pass through the public NAT gateway, a route to the public NAT gateway in the VPC is required. When you create a public NAT gateway, a default route 0.0.0.0/0 to the public NAT gateway is automatically added to the default route table of the VPC. If the default route 0.0.0.0/0 already exists in the default route table of the VPC before you create the public NAT gateway, the default route that points to the public NAT gateway will fail to be added automatically. In this case, perform the following operations after the public NAT gateway is successfully created: Manually add a different route that points to the gateway or create a default route 0.0.0.0/0 pointing to the gateway in the new routing table. |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Subnet                            | The subnet that the public NAT gateway belongs to. Select a subnet that is not used by any other NAT gateways.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The subnet must have at least one available IP address.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The selected subnet cannot be changed after you create the public NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The NAT gateway will be deployed in the selected subnet. The NAT gateway works for the entire VPC where it is deployed. To enable communications over the Internet, add SNAT or DNAT rules.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Specifications                    | The specifications of the public NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The value can be **Micro**, **Small**, **Medium**, **Large**, or **Extra-large**. You can click **Learn more** on the page to view details of each specification.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Enterprise Project                | The enterprise project that the public NAT gateway belongs to.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | If an enterprise project has been configured, select the enterprise project. If you have not configured any enterprise project, select the **default** enterprise project.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Advanced Settings (Optional)      | Click the drop-down arrow to configure advanced parameters of the public NAT gateway, such as **Description**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Description                       | Supplementary information about the public NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | Enter up to 255 characters. Angle brackets (<>) are not allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tag                               | The identifier of the NAT gateway. A tag is a key-value pair. You can add up to 20 tags to each NAT gateway.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      |                                   | The tag key and value must meet the requirements listed in :ref:`Table 2 <nat_qs_0016__nat_qs_0003_en-us_topic_0030971658_en-us_topic_0013935842_table248245914136>`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. _nat_qs_0016__nat_qs_0003_en-us_topic_0030971658_en-us_topic_0013935842_table248245914136:

   .. table:: **Table 2** Tag requirements

      +-----------------------------------+-----------------------------------------------------------------------------------+
      | Parameter                         | Requirement                                                                       |
      +===================================+===================================================================================+
      | Key                               | -  Cannot be left blank.                                                          |
      |                                   | -  Must be unique for each NAT gateway.                                           |
      |                                   | -  Can contain a maximum of 36 characters.                                        |
      |                                   | -  Contains only letters, digits, hyphens (-), underscores (_), and at signs (@). |
      +-----------------------------------+-----------------------------------------------------------------------------------+
      | Value                             | -  Can contain a maximum of 43 characters.                                        |
      |                                   | -  Contains only letters, digits, hyphens (-), underscores (_), and at signs (@). |
      +-----------------------------------+-----------------------------------------------------------------------------------+

#. Click **Create Now**. On the page displayed, confirm the public NAT gateway specifications.

#. Click **Submit**.

   It takes 1 to 5 minutes to create a public NAT gateway.

#. In the list, view the status of the public NAT gateway. For details about the NAT gateway status, see :ref:`Table 3 <nat_qs_0016__nat_qs_0003_table1213025114317>`.

   .. _nat_qs_0016__nat_qs_0003_table1213025114317:

   .. table:: **Table 3** NAT gateway statuses

      ======== =================================
      Status   Description
      ======== =================================
      Running  The NAT gateway is normal.
      Creating The NAT gateway is being created.
      Updating The NAT gateway is being updated.
      Deleting The NAT gateway is being deleted.
      Frozen   The NAT gateway has been frozen.
      Abnormal The NAT gateway is abnormal.
      ======== =================================

.. note::

   After the public NAT gateway is created, check whether a default route (0.0.0.0/0) that points to the public NAT gateway exists in the default route table of the VPC where the public NAT gateway is. If no, add a route pointing to the public NAT gateway to the default route table, alternatively, create a custom route table and add the default route 0.0.0.0/0 pointing to the public NAT gateway to the table. The following describes how to add a route to a custom route table.

Adding a Default Route Pointing to the Public NAT Gateway
---------------------------------------------------------

#. Log in to the management console.

#. Click |image3| in the upper left corner and select the desired region and project.

#. Under **Network**, select **Virtual Private Cloud**.

#. In the navigation pane on the left, choose **Route Tables**.

#. On the **Route Tables** page, click **Create Route Table** in the upper right corner.

   **VPC**: Select the VPC to which the public NAT gateway belongs.

#. After the custom route table is created, click its name.

   The **Summary** page is displayed.

#. Click **Add Route** and configure parameters as follows:

   **Destination**: Set it to **0.0.0.0/0**.

   **Next Hop Type**: Select **NAT gateway**.

   **Next Hop**: Select the created NAT gateway.

#. Click **OK**.

.. |image1| image:: /_static/images/en-us_image_0141273034.png
.. |image2| image:: /_static/images/en-us_image_0000002021410433.png
.. |image3| image:: /_static/images/en-us_image_0141273034.png
