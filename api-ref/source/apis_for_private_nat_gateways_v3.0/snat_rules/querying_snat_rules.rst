:original_name: ListPrivateSnats.html

.. _ListPrivateSnats:

Querying SNAT Rules
===================

Function
--------

This API is used to query SNAT rules.

URI
---

GET /v3/{project_id}/private-nat/snat-rules

.. table:: **Table 1** Path Parameters

   ========== ========= ====== =========================
   Parameter  Mandatory Type   Description
   ========== ========= ====== =========================
   project_id Yes       String Specifies the project ID.
   ========== ========= ====== =========================

.. table:: **Table 2** Query Parameters

   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type             | Description                                                                                                                                      |
   +=======================+=================+==================+==================================================================================================================================================+
   | limit                 | No              | Integer          | Specifies the number of records displayed on each page.                                                                                          |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | The value ranges from 1 to 2000.                                                                                                                 |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | Default value: **2000**                                                                                                                          |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | **Value range:**                                                                                                                                 |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | 1-2000                                                                                                                                           |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | **Default value:**                                                                                                                               |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | 2000                                                                                                                                             |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker                | No              | String           | Specifies the start resource ID of pagination query. If the parameter is left blank, only resources on the first page are queried.               |
   |                       |                 |                  |                                                                                                                                                  |
   |                       |                 |                  | The value is obtained from **next_marker** or **previous_marker** in **PageInfo** queried last time.                                             |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | page_reverse          | No              | Boolean          | Specifies whether to query resources on the previous page.                                                                                       |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | No              | Array of strings | Specifies the SNAT rule ID.                                                                                                                      |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id            | No              | Array of strings | Specifies the project ID.                                                                                                                        |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | No              | Array of strings | Provides supplementary information about the SNAT rule. The description can contain up to 255 characters and cannot contain angle brackets (<>). |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | gateway_id            | No              | Array of strings | Specifies the private NAT gateway ID.                                                                                                            |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr                  | No              | Array of strings | Specifies the CIDR block that matches the SNAT rule.                                                                                             |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | virsubnet_id          | No              | Array of strings | Specifies the ID of the subnet that matches the SNAT rule.                                                                                       |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | transit_ip_id         | No              | Array of strings | Specifies the ID of the transit IP address.                                                                                                      |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | transit_ip_address    | No              | Array of strings | Specifies the transit IP address.                                                                                                                |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | Array of strings | Specifies the ID of the enterprise project that is associated with the SNAT rule when the SNAT rule is created.                                  |
   +-----------------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                             |
   +=================+=================+=================+=========================================================================================================================+
   | X-Auth-Token    | Yes             | String          | Specifies the user token.                                                                                               |
   |                 |                 |                 |                                                                                                                         |
   |                 |                 |                 | It is a response to the API used to obtain a user token. This API is the only one that does not require authentication. |
   |                 |                 |                 |                                                                                                                         |
   |                 |                 |                 | The value of **X-Subject-Token** in the response header is the token value.                                             |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +------------+------------------------------------------------------------------------------+------------------------------------------------------+
   | Parameter  | Type                                                                         | Description                                          |
   +============+==============================================================================+======================================================+
   | snat_rules | Array of :ref:`PrivateSnat <listprivatesnats__response_privatesnat>` objects | Specifies the response body for querying SNAT rules. |
   +------------+------------------------------------------------------------------------------+------------------------------------------------------+
   | page_info  | :ref:`PageInfo <listprivatesnats__response_pageinfo>` object                 | Specifies the pagination information.                |
   +------------+------------------------------------------------------------------------------+------------------------------------------------------+
   | request_id | String                                                                       | Specifies the request ID.                            |
   +------------+------------------------------------------------------------------------------+------------------------------------------------------+

.. _listprivatesnats__response_privatesnat:

.. table:: **Table 5** PrivateSnat

   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter               | Type                                                                                         | Description                                                                                                                                      |
   +=========================+==============================================================================================+==================================================================================================================================================+
   | id                      | String                                                                                       | Specifies the SNAT rule ID.                                                                                                                      |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id              | String                                                                                       | Specifies the project ID.                                                                                                                        |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | gateway_id              | String                                                                                       | Specifies the private NAT gateway ID.                                                                                                            |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr                    | String                                                                                       | Specifies the CIDR block that matches the SNAT rule.                                                                                             |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | Constraints:                                                                                                                                     |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  Either this parameter or **virsubnet_id** must be specified.                                                                                  |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  The CIDR block cannot be the same as that of an existing SNAT rule.                                                                           |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | virsubnet_id            | String                                                                                       | Specifies the ID of the subnet that matches the SNAT rule.                                                                                       |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | Constraint: Either this parameter or **cidr** must be specified.                                                                                 |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | description             | String                                                                                       | Provides supplementary information about the SNAT rule. The description can contain up to 255 characters and cannot contain angle brackets (<>). |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | transit_ip_associations | Array of :ref:`AssociatedTransitIp <listprivatesnats__response_associatedtransitip>` objects | Specifies the list of details of associated transit IP addresses.                                                                                |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at              | String                                                                                       | Specifies the time when the SNAT rule was created. It is a UTC time in *yyyy-mm-ddThh:mm:ssZ* format.                                            |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at              | String                                                                                       | Specifies the time when the SNAT rule was updated. It is a UTC time in *yyyy-mm-ddThh:mm:ssZ* format.                                            |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id   | String                                                                                       | Specifies the enterprise project ID.                                                                                                             |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                  | String                                                                                       | Specifies the SNAT rule status of a private NAT gateway.                                                                                         |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | The value can be:                                                                                                                                |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  **ACTIVE**: The SNAT rule is running properly.                                                                                                |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  **FROZEN**: The SNAT rule is frozen.                                                                                                          |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | Enumeration values:                                                                                                                              |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  **ACTIVE**                                                                                                                                    |
   |                         |                                                                                              |                                                                                                                                                  |
   |                         |                                                                                              | -  **FROZEN**                                                                                                                                    |
   +-------------------------+----------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listprivatesnats__response_associatedtransitip:

.. table:: **Table 6** AssociatedTransitIp

   ================== ====== ===========================================
   Parameter          Type   Description
   ================== ====== ===========================================
   transit_ip_id      String Specifies the ID of the transit IP address.
   transit_ip_address String Specifies the transit IP address.
   ================== ====== ===========================================

.. _listprivatesnats__response_pageinfo:

.. table:: **Table 7** PageInfo

   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                             |
   +=======================+=======================+=========================================================================================================================================================================================+
   | next_marker           | String                | Specifies the ID of the last record in this query, which can be used in the next query.                                                                                                 |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | previous_marker       | String                | Specifies the ID of the first record in the pagination query result. When **page_reverse** is set to **true**, this parameter is used together to query resources on the previous page. |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | current_count         | Integer               | Specifies the ID of the last record in the pagination query result. It is usually used to query resources on the next page.                                                             |
   |                       |                       |                                                                                                                                                                                         |
   |                       |                       | **Value range:**                                                                                                                                                                        |
   |                       |                       |                                                                                                                                                                                         |
   |                       |                       | 1-2000                                                                                                                                                                                  |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

.. code-block:: text

   GET https://{Endpoint}/v3/cfa563efb77d4b6d9960781d82530fd8/private-nat/snat-rules

Example Responses
-----------------

**Status code: 200**

SNAT rules queried.

.. code-block::

   {
     "snat_rules" : [ {
       "id" : "8a522ff9-8158-494b-83cd-533b045700e6",
       "project_id" : "cfa563efb77d4b6d9960781d82530fd8",
       "description" : "snat rule description",
       "gateway_id" : "80da6f26-94eb-4537-97f0-5a56f4d04cfb",
       "cidr" : "",
       "virsubnet_id" : "95df1b88-d9bc-4edd-a808-a771dd4ded32",
       "transit_ip_associations" : [ {
         "transit_ip_id" : "bbe7c2e7-3bad-445b-a067-b30acce66053",
         "transit_ip_address" : "172.20.1.98"
       } ],
       "created_at" : "2019-10-22T03:33:07",
       "updated_at" : "2019-10-22T03:33:07",
       "status" : "ACTIVE"
     }, {
       "id" : "af4dbb83-7ca0-4ed1-b28b-668c1f9c6b81",
       "project_id" : "cfa563efb77d4b6d9960781d82530fd8",
       "description" : "snat rule description",
       "gateway_id" : "80da6f26-94eb-4537-97f0-5a56f4d04cfb",
       "cidr" : "",
       "virsubnet_id" : "5b9ea497-727d-4ad0-a99e-3984b3f5aaed",
       "transit_ip_associations" : [ {
         "transit_ip_id" : "36a3049a-1682-48b3-b1cf-cb986a3350ef",
         "transit_ip_address" : "172.20.1.10"
       } ],
       "created_at" : "2019-10-22T03:31:19",
       "updated_at" : "2019-10-22T03:31:19",
       "status" : "ACTIVE"
     } ],
     "page_info" : {
       "next_marker" : "af4dbb83-7ca0-4ed1-b28b-668c1f9c6b81",
       "previous_marker" : "8a522ff9-8158-494b-83cd-533b045700e6",
       "current_count" : 2
     },
     "request_id" : "69806207-62e3-4950-b463-ff5c1779b714"
   }

Status Codes
------------

=========== ===================
Status Code Description
=========== ===================
200         SNAT rules queried.
=========== ===================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
